(()=>{"use strict";let e=0,t=0,a=3,s=0,o=0,r=0;const n={red:"#fca5a5",lime:"#a3e635",cyan:"#67e8f9",purple:"#d8b4fe",pink:"#f9a8d4",teal:"#5eead4",defaultColor:"#fdba74"};function l(a,n=!1){const l=m(),d=document.getElementById("js-card-container"),i=document.querySelector(".js-projects-container"),c=document.getElementById("new-project-template").content.cloneNode(!0),u=c.querySelector(".js-label-newprj"),y=c.querySelector(".js-input-newprj"),p=c.querySelector(".js-btn-prj-trash");y.id=s.toString(),u.textContent=a,u.htmlFor=s.toString(),y.dataset.index=s,s++,1!==s||n||y.setAttribute("checked",!0),i.appendChild(c),y.addEventListener("change",(a=>{d.innerHTML="",o=0,e=0,t=0;const s=k();r=y.dataset.index,s.loadTodoList(r)})),p.addEventListener("click",(()=>{confirm(`Remove project: ${a} ?`)&&(s=0,i.innerHTML="",d.innerHTML="",l.removeProject(r))}))}function d(s,l,d,i=!1){const c=m(),u=document.getElementById("js-card-container"),y=document.getElementById("js-card-template"),p=document.getElementById("js-task-template"),v=y.content.cloneNode(!0),g=v.querySelector(".js-task-container"),j=v.querySelector(".js-card-title"),S=v.querySelector(".js-pin"),L=v.querySelector(".js-unpin"),f=v.querySelector(".js-btn-newtask"),h=v.querySelector(".js-btn-palette"),b=v.querySelector(".js-btn-trash"),q=v.querySelector(".js-input-newtask"),E=v.querySelector(".js-label-newtask"),C=v.querySelector(".js-card-scale");q.id="new-task"+o.toString(),E.id="new-task"+o.toString();let w=n[l]||n.defaultColor;C.dataset.index=o,o++,t=0,i&&c.saveCard(r,s),j.style.backgroundColor=w,j.textContent=s,h.style.color=w,d?(u.insertBefore(v,u.firstChild),S.classList.toggle("scale-0")):(u.appendChild(v),L.classList.toggle("scale-0"));const T=(a,s=!1,o=!1)=>{e++;const n=p.content.cloneNode(!0),l=n.querySelector(".js-task-input"),d=n.querySelector(".js-task-label"),i=n.querySelector(".js-btn-deltask"),k=n.querySelector(".js-btn-edittask"),u=n.querySelector(".js-input-edittask"),m=n.querySelector(".js-label-edittask"),y=n.querySelector(".js-btn-editcancel"),v=n.querySelector(".js-edittask"),j=n.querySelector(".js-task");j.dataset.index=t,t++,l.checked=o,l.style.borderColor=w,d.textContent=a,l.id="task"+e.toString(),d.htmlFor="task"+e.toString(),u.id="edit-task"+e.toString(),m.htmlFor="edit-task"+e.toString(),g.appendChild(n),s&&c.saveTask(r,C.dataset.index,a);const S=(e=!0)=>{v.classList.toggle("scale-0"),i.classList.toggle("scale-0"),k.classList.toggle("scale-0"),e?(d.classList.toggle("scale-0"),u.focus()):setTimeout((()=>{d.classList.toggle("scale-0")}),300)};l.addEventListener("change",(()=>{const e=C.dataset.index,t=j.dataset.index;let a=!1;l.checked&&(a=!0),c.saveMark(r,e,t,a)})),u.addEventListener("keydown",(e=>{const t=C.dataset.index,a=j.dataset.index,s=u.value;13===e.keyCode&&""!==s&&(d.textContent=s,c.saveEdit(r,t,a,s),u.value="",u.blur())})),y.addEventListener("click",(()=>{S(!1)})),i.addEventListener("click",(()=>{g.innerHTML="";const e=c.removeTask(r,C.dataset.index,j.dataset.index);for(let t=0;t<e.length;t++){const a=e[t];T(a.task,!1,a.marked)}})),k.addEventListener("click",(()=>{S()})),u.addEventListener("blur",(()=>{S(!1)}))},x=()=>{L.classList.toggle("scale-0"),S.classList.toggle("scale-0")};return setTimeout((()=>{C.classList.remove("scale-0"),setTimeout((()=>{C.classList.remove("scale-0")}),1e3)}),100),S.addEventListener("click",(()=>{const e=C.dataset.index;c.savePin(r,e,!1),u.appendChild(C),x()})),L.addEventListener("click",(()=>{const e=C.dataset.index;c.savePin(r,e,!0),u.insertBefore(C,u.firstChild),x()})),f.addEventListener("click",(()=>{const e=q.value;""!==e&&(T(e,!0),q.value="")})),q.addEventListener("keydown",(e=>{const t=q.value;13===e.keyCode&&""!==t&&(T(t,!0),q.value="")})),h.addEventListener("click",(()=>{const e=C.dataset.index,t=Object.keys(n)[a];c.saveTheme(r,e,t),w=Object.values(n)[a],a++,a>6&&(a=0),j.style.backgroundColor=w,h.style.color=w,C.querySelectorAll("input").forEach((e=>{"new-task"!=e.id&&(e.style.borderColor=w)}))})),b.addEventListener("click",(()=>{c.removeCard(r,C.dataset.index),u.innerHTML="",o=0,e=0,t=0,setTimeout((()=>{k().loadTodoList(r)}),50)})),{newTask:T}}const i=[{name:"project",title:"Workout",marked:!1,"todo-list":[{name:"todo",title:"Daily Routine",dueDate:"15/12/2023",priority:!0,color:"red",marked:!1,tasks:[{task:"Wake up morning",marked:!0},{task:"30 min of cardio",marked:!1},{task:"Eat healthy meat",marked:!1},{task:"Work out for 40 minutes",marked:!1}]},{name:"todo",title:"Weekly tasks",dueDate:"15/12/2023",priority:!1,color:"lime",marked:!1,tasks:[{task:"Exercise everyday",marked:!1},{task:"Plan your workouts",marked:!1},{task:"Stretch for 10 min after each workout",marked:!1}]},{name:"todo",title:"Monthly tasks",dueDate:"15/12/2023",priority:!1,color:"cyan",marked:!1,tasks:[{task:"Track your progress",marked:!1},{task:"Make adjustments to your workouts as needed",marked:!1},{task:"Set new goals for yourself",marked:!1},{task:"Reward yourself for the hard work",marked:!1}]}]},{name:"project",title:"Career",marked:!1,"todo-list":[{name:"todo",title:"Job Search",dueDate:"20/03/2024",priority:!1,color:"purple",marked:!1,tasks:[{task:"Update resume",marked:!1},{task:"Create a LinkedIn profile",marked:!1},{task:"Research potential employers",marked:!1},{task:"Apply for at least 3 jobs per day",marked:!1}]},{name:"todo",title:"Skill Development",dueDate:"15/01/2024",priority:!0,color:"pink",marked:!1,tasks:[{task:"Identify skills to improve",marked:!1},{task:"Enroll in online courses",marked:!1},{task:"Set up a study schedule",marked:!1}]}]},{name:"project",title:"Home Improvement",marked:!1,"todo-list":[{name:"todo",title:"Kitchen Renovation",dueDate:"28/02/2024",priority:!0,color:"teal",marked:!1,tasks:[{task:"Create a budget",marked:!1},{task:"Hire a contractor",marked:!1},{task:"Monitor progress",marked:!1}]},{name:"todo",title:"Garden Makeover",dueDate:"30/04/2024",priority:!1,color:"lime",marked:!1,tasks:[{task:"Plan landscaping changes",marked:!1},{task:"Plant flowers",marked:!1},{task:"Create an outdoor seating area",marked:!1}]}]}];function c(){const e=localStorage.getItem("todolist");let t={};if(null!==e)try{t=JSON.parse(e)}catch(e){console.log("Parser error. Loading default To-do list... "),t=i}else console.log("Data not found. Creating default To-do list..."),localStorage.setItem("todolist",JSON.stringify(i)),t=i;return t}const k=()=>{const e=c();return{loadTodoList:t=>{const a=e[t]["todo-list"];for(let e=0;e<a.length;e++){const t=d(a[e].title,a[e].color,a[e].priority);for(let s=0;s<a[e].tasks.length;s++){const o=a[e].tasks[s];t.newTask(o.task,!1,o.marked)}}},loadMenu:()=>{for(let t=0;t<e.length;t++)l(e[t].title)}}},u=(e,t=!1)=>{t?localStorage.setItem("todolist",JSON.stringify(i)):null!==e&&localStorage.setItem("todolist",JSON.stringify(e))},m=()=>{const e=c();return{saveTask:(t,a,s)=>{const o={task:s,marked:!1};e[t]["todo-list"][a].tasks.push(o),u(e)},saveCard:(t,a)=>{const s={name:"todo",title:a,dueDate:"20/05/2025",priority:!1,tasks:[]};e[t]["todo-list"].push(s),u(e)},saveMark:(t,a,s,o)=>{e[t]["todo-list"][a].tasks[s].marked=o,u(e)},saveEdit:(t,a,s,o)=>{e[t]["todo-list"][a].tasks[s].task=o,u(e)},saveTheme:(t,a,s)=>{e[t]["todo-list"][a].color=s,u(e)},savePin:(t,a,s)=>{e[t]["todo-list"][a].priority=s,u(e)},addProject:t=>{const a={name:"project",title:t,marked:!1,"todo-list":[]};e.push(a),u(e)},removeProject:t=>{e.splice(t,1),u(e),setTimeout((()=>{for(let t=0;t<e.length;t++)l(e[t].title,!0)}),50)},removeCard:(t,a)=>{e[t]["todo-list"].splice(a,1),u(e)},removeTask:(t,a,s)=>(e[t]["todo-list"][a].tasks.splice(s,1),u(e),e[t]["todo-list"][a].tasks)}},y=k();y.loadTodoList(0),y.loadMenu(),(()=>{const e=m(),t=document.querySelector(".js-btn-mobile-menu"),a=document.querySelector(".js-sidebar"),s=document.querySelector(".js-input-newcard"),o=document.querySelector(".js-btn-newcard"),r=document.querySelector(".js-btn-addproject"),n=document.querySelector(".js-newproject"),i=document.querySelector(".js-input-newproject"),c=document.querySelector(".js-btn-new-cancel");r.addEventListener("click",(()=>{n.classList.add("scale-100"),r.classList.add("scale-0"),i.focus()})),i.addEventListener("keydown",(t=>{const a=i.value;13===t.keyCode&&""!==a&&(i.value="",i.blur(),e.addProject(a),l(a))})),i.addEventListener("blur",(()=>{setTimeout((()=>{r.classList.remove("scale-0")}),300),n.classList.remove("scale-100")})),c.addEventListener("click",(()=>{i.blur()})),t.addEventListener("click",(()=>{a.classList.toggle("-translate-x-full")})),s.addEventListener("keydown",(e=>{const t=s.value;13===e.keyCode&&""!==t&&(d(t,"defaultColor",!1,!0),s.value="")})),o.addEventListener("click",(()=>{const e=s.value;""!==e&&(d(e,"defaultColor",!1,!0),s.value="")}))})()})();